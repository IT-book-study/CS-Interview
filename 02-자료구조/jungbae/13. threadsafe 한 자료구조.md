1. ThreadSafe 한 자료구조란 멀티스레드 상황에서 함수, 변수, 객체 등에 동시에 접근하더라도 문제가 되지 않는 것을 의미합니다.

2. 이러한 자료구조를 사용하지 않는다면 지역변수를 이용할 수 있습니다. 전역변수는 쓰레드가 공유할 수 있기 때문에 지역변수를 사용해 ThreadSafe 를 유지할 수 있습니다.
- 메모리의 데이터영역에 저장되며 여러 스레드가 전역변수에 동시에 접근할 수 있습니다. 지역변수는 스택영역에 있기 때문에 각 스레드는 자신만의 스택을 가지기에 독립적입니다.
- 스프링에서는 다양한 스코프를 제공해 전역변수의 범위를 제어합니다.

3. 스프링의 빈 스코프
- 싱글톤이 기본이며, 컨테이너 내에서 단일 인스턴스만 생성되어 모든 스레드에서 공유된다는 것을 의미합니다.
- 싱글톤은 어떤 생성자가 호출되더라도 최초에 호출되어 객체가 생성되면 그 다음에는 생성된 객체를 리턴하는 방식으로 구현할 수 있습니다.

물론, 객체의 상태가 변할 수 있다면 멀티스레드 환경에서 스레드세이프 하지 못할 수 있으며,  
@Controller,@Service, @Repository 등의 IoC 컨테이너가 관리하는 빈이 예시가 될 수 있습니다.

예를 들어 한 객체에 변수로 private final만 존재한다면, 불변객체로 만들어 스레드 세이프하게 만들 수 있습니다.  
하지만, private List<> ~ 라는 변수에 public 메서드가 존재한다면 여러 스레드에서 이 메서드를 사용하며 상태가 예측할 수 없게 변경될 수 있습니다.
이때 불변객체를 만들 수 없다면, 값을 변경하는 메서드에 syncronized를 하거나 concurrent 패키지를 이용하거나, ThreadLocal을 이용할 수 있습니다.

4. 자바의 ThreadLocal
- ThreadLocal은 자바에서 스레드 간에 독립적인 데이터를 유지하기 위한 클래스입니다. 각 스레드는 자신만의 ThreadLocal 변수를 가질 수 있으며, 이 변수에 데이터를 저장하면 해당 스레드에서만 접근 가능합니다.
- 하지만 주의점으로 메모리 누수를 유발할 수 있다는 것입니다. 스레드가 종료되더라도 변수에 저장된 값이 삭제되지 않으면 해당 값이 유지될 수 있습니다. remove()를 호출하거나, ThreadLocal변수를 null로 설정해 free 해줘야 합니다.

5. ThreadSafe 한 자료구조
- ConcurrentHashMap, CopyOnWriteArrayList, BlockingQueue ...
- 내부적으로 세분화된 동기화를 사용합니다. 여러 스레드간 충돌이 적게 발생하게 되고 경합이 줄어듭니다.
- 일부 자료구조에서는 낙관적 락, CAS를 사용해 동시성을 높입니다(ConcurrentHashMap)
- 일부 자료구조에서는 쓰기 카운팅을 통한 최적화를 수행합니다(CopyOnWriteArrayList)